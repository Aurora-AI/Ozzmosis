# Windows: lock em node_modules durante `npm ci`

Em Windows, falhas `EBUSY`/`EPERM unlink` no `npm ci` quase sempre significam que algum processo ainda está segurando arquivos dentro de `node_modules` (comum: VS Code + extensões que rodam Node, AmazonQ language server, dev server/test watcher, antivírus/indexador). O procedimento determinístico é: (1) pare watchers e encerre processos `node` que não deveriam estar rodando (`Get-Process node,Code,AmazonQ` e `Stop-Process -Force` quando aplicável); (2) rerode `npm ci --no-progress`; (3) se persistir, remova somente `node_modules` e reinstale (não apague `package-lock.json`), opcionalmente limpando o cache do npm (`npm cache verify` e `npm cache clean --force`) e repetindo o `npm ci` com retry. Evite `npm audit fix --force` e qualquer edição manual do lockfile; o objetivo é destravar o filesystem e voltar ao fluxo padrão do monorepo: lockfile único + `npm ci` na raiz.
