Manual de Constru√ß√£o Aurora ‚Äî Vers√£o 4.0 (Edi√ß√£o G√™nese)
Documento Oficial de Engenharia ‚Äî Projeto √Ålvaro Status: üü¢ VIGENTE (Substitui v3.3) Arquitetura: Monorepo Biol√≥gico (Aurora Ecosystem) Doutrina: Homeostase Digital & Trustware Compatibilidade: Python 3.12+ / Node 20+ / Docker Compose V2

1. O Conceito: Organismo Digital
Diferente de softwares tradicionais, o Projeto √Ålvaro √© tratado como um organismo vivo. A engenharia deve refletir biologia.

N√£o constru√≠mos "m√≥dulos", constru√≠mos "√≥rg√£os".

N√£o corrigimos "bugs", curamos "doen√ßas" (Homeostase).

N√£o permitimos "crescimento desordenado", prevenimos "c√¢ncer" (Trustware).

2. Estrutura do Projeto (O Esqueleto)
O projeto deve residir em um √∫nico reposit√≥rio git (Monorepo) para garantir coer√™ncia gen√©tica.

A √Årvore de Diret√≥rios Obrigat√≥ria
Plaintext

Aurora-Ecosystem/
‚îú‚îÄ‚îÄ .devcontainer/              # Ambiente de Desenvolvimento Padronizado
‚îú‚îÄ‚îÄ .github/                    # CI/CD (Workflows de Teste e Build)
‚îú‚îÄ‚îÄ apps/                       # [√ìRG√ÉOS VITAIS] Servi√ßos Execut√°veis
‚îÇ   ‚îú‚îÄ‚îÄ butantan-shield/        # (Imunologia) Gateway FastAPI + Circuit Breaker
‚îÇ   ‚îú‚îÄ‚îÄ alvaro-core/            # (Identidade) Orquestrador Python + Ollama Client
‚îÇ   ‚îú‚îÄ‚îÄ aurora-vision/          # (Sentidos) Agentes de Navega√ß√£o e Computer Use
‚îÇ   ‚îî‚îÄ‚îÄ mycelium-front/         # (Pele) Interface Next.js (React)
‚îú‚îÄ‚îÄ libs/                       # [SISTEMA NERVOSO] Bibliotecas Compartilhadas
‚îÇ   ‚îú‚îÄ‚îÄ elysian-brain/          # (Cogni√ß√£o) L√≥gica Pura, √Årvores de Decis√£o (Stateless)
‚îÇ   ‚îî‚îÄ‚îÄ trustware/              # (Defesa) Schemas Zod/Pydantic, Logs e Criptografia
‚îú‚îÄ‚îÄ docker/                     # [AMBIENTE]
‚îÇ   ‚îî‚îÄ‚îÄ compose.yml             # O "Feiti√ßo da Vida" (Orquestra√ß√£o Local)
‚îú‚îÄ‚îÄ pyproject.toml              # Gerenciador de Depend√™ncias Python (Poetry Workspace)
‚îî‚îÄ‚îÄ package.json                # Gerenciador de Depend√™ncias JS (Bun/npm Workspaces)
3. Defini√ß√£o dos √ìrg√£os (Responsabilidades)
üõ°Ô∏è 3.1. Apps: Butantan Shield (Sistema Imunol√≥gico)
Fun√ß√£o: Proteger o organismo de inputs t√≥xicos e sobrecarga.

Regra de Ouro: NENHUMA requisi√ß√£o externa chega ao √Ålvaro sem passar por aqui.

Tecnologia: FastAPI, Redis (Rate Limit), Tenacity (Retries).

Comportamento: Se o √Ålvaro estiver lento, o Butantan corta a conex√£o (Circuit Breaker Aberto) para evitar fal√™ncia m√∫ltipla de √≥rg√£os.

üß¨ 3.2. Apps: √Ålvaro Core (O Organismo)
Fun√ß√£o: Processar inten√ß√µes, manter estado e mem√≥ria.

Restri√ß√£o de Hardware: CPU-Only Build. O √Ålvaro N√ÉO cont√©m o modelo de IA. Ele se conecta via rede a um "C√©rebro Externo" (Container Ollama ou API).

Depend√™ncia: Consome a libs/elysian-brain para estruturar o pensamento antes de agir.

üëÅÔ∏è 3.3. Apps: Aurora Vision (Sentidos)
Fun√ß√£o: Interagir com o mundo n√£o-API (Sites, PDFs, Telas).

Tecnologia: Playwright, Docker-in-Docker (Sandbox), Computer Use Drivers.

Seguran√ßa: Roda em isolamento total. Se pegar um v√≠rus navegando, o container √© incinerado e recriado.

üß† 3.4. Libs: Elysian Brain (Cogni√ß√£o Pura)
Fun√ß√£o: Biblioteca de algoritmos de racioc√≠nio (Tree of Thoughts).

Regra: Stateless. N√£o acessa banco de dados. Recebe dados -> Pensa -> Devolve decis√£o. √â o "software" que roda no hardware do √Ålvaro.

4. Doutrina T√©cnica (Regras de Constru√ß√£o)
4.1. Production-First & Trustware
Valida√ß√£o Absoluta: Nenhuma fun√ß√£o p√∫blica recebe dados sem um Schema (Pydantic/Zod) definido.

Logs Assinados: Todo log deve ser JSON estruturado contendo { "organ": "alvaro", "action": "decision", "status": "success", "signature": "..." }.

Testes de Sobreviv√™ncia: O CI/CD n√£o deve apenas testar se "funciona", mas se "resiste" (Testes de Carga e Seguran√ßa).

4.2. Homeostase Digital (Auto-Cura)
Todo c√≥digo cr√≠tico deve implementar o padr√£o Try-Reflect-Retry:

Try: Tenta executar a a√ß√£o.

Catch: Se falhar, captura o erro.

Reflect: (Opcional) Pergunta ao LLM "Por que isso falhou e como corrijo?".

Retry: Tenta novamente com os par√¢metros corrigidos.

Fail: Se falhar 3x, escala para o Butantan (Erro Cr√≠tico).

4.3. Ambiente CPU-Only (Compatibilidade Universal)
As imagens Docker de produ√ß√£o (apps/) N√ÉO devem depender de drivers NVIDIA/CUDA.

A infer√™ncia pesada (LLM) deve ser delegada a servi√ßos externos (Ollama na rede local ou Azure OpenAI).

Isso garante que o √Ålvaro rode em qualquer servidor (Linux, Mac, Windows) barato.

5. Protocolo de Comunica√ß√£o (O Sistema Nervoso)
Frontend (Mycelium) -> Shield (Butantan): REST/WebSocket (Protegido por JWT).

Shield -> Core (√Ålvaro): gRPC ou REST Interno (Rede Docker Segura).

Core -> Vision: Fila de Tarefas (Redis/BullMQ) ou REST Ass√≠ncrono.

Core -> LLM (Ollama): HTTP Standard (Ollama API).

6. Procedimento de G√™nese (Setup)
Para dar vida ao sistema, o comando padr√£o deve ser:

Bash

# 1. Instala√ß√£o das depend√™ncias do corpo
poetry install  # Backend
npm install     # Frontend

# 2. Invoca√ß√£o dos servi√ßos vitais
docker compose up -d --build

# 3. Verifica√ß√£o de Sinais Vitais
./scripts/healthcheck.sh
7. Assinaturas e Valida√ß√£o
Autoridade T√©cnica: Jules (Estrategista Digital) Autoridade Executiva: Rodrigo C√©sar Winhaski (Comandante) Vig√™ncia: A partir de Dezembro de 2025.

A viola√ß√£o destas diretrizes constitui risco biol√≥gico ao projeto e resultar√° na rejei√ß√£o autom√°tica do Pull Request.